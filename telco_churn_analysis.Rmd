---
title: "Churn Analysis"
author: "Kevin Baca"
date: "4/15/2019"
output: 
  prettydoc::html_pretty:
    theme: leonids
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
	echo = FALSE,
	message = FALSE,
	warning = FALSE
)
```

## Churn Analysis for Telco Subscriptions
Exploration, Tidying, Plotting and Modeling based on the public WA_Fn-UseC_-Telco-Customer-Churn data set.  
 

### Index
* [Project Spec](#A1)
* [Loading Data and Packages](#A2)
* [Exploring Data](#A3)
* [Tidying Data](#A4)
* [Churn Features](#A5)

### Project Spec {#A1} 

##### Problem
* Customer Churn is a metric used by SaaS and subscripton-based businesses to measure the number of customers lost in a given amount of time. 

* For example, MRR Churn is a vital financial metric that calculates the amount of monthly recurring revenue (MRR) lost each month due to customer cancellations. 

* A SaaS businesse's survival depends on recurring revenue from subscription customers, so natrurally, churn reduction is one of the most important KPIs. 



##### Proposal

* With Churn representing a binary target variable, customer data related to payment, adoption, and demographics can form explantory features that correlate to churn likelihood. 

* Once the features that best correlate to customer churn are identified, the next step will be to construct a model that will predict churn based on those featres. 

### Loading Data and Packages {#A2} 
```{r echo=TRUE, message=FALSE, warning=FALSE, paged.print=FALSE}
library(readr)
telco <- read_csv("~/Customer-Churn-Analysis/WA_Fn-UseC_-Telco-Customer-Churn.csv")

#loading packages
library(dplyr)
library(tidyverse)
library(ggplot2)
library(Hmisc)
library(GGally)

#creating a dataframe object called telco
telco <- data.frame(telco)

```


#### Exploring Data {#A3} 
```{r}
glimpse(telco)
```

#### Tidying Data {#A4} 
```{r echo=TRUE, message=FALSE, warning=FALSE, paged.print=FALSE}

#Renaming PaymentMethod elements for plot labels.
telco <- telco %>% 
  mutate(Payment= case_when(
  str_detect(PaymentMethod, "Bank") ~ "Bank Transfer",
  str_detect(PaymentMethod, "Credit") ~ "Credit Card",
  T ~ PaymentMethod
  ))
  
```

####  Churn by Payment Features {#A5}
``` {r}
posn.jd <- position_jitterdodge(0.5, 0, 0.6)

payment_plot <- ggplot(telco,aes(x=Payment,fill=Churn, order=Churn))+
  geom_bar(position="Fill")+
  facet_grid(.~ Contract)+ 
  theme(axis.text = element_text(angle = 90, hjust=1))

payment_plot 
```



